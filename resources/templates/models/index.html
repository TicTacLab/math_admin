[% extends "layout.html" %]
[% block body %]
<h1>Files</h1>
[% if admin? %]
<a href="/files/upload" class="btn btn-primary btn-lg">Upload New</a>
[% endif %]
<table class="table table-hover">
    <tr>
        <th>ID</th>
        <th>File Name</th>
        <th>Last Modified</th>
        <th>Actions</th>
    </tr>
    [% for model in models %]
    <tr class="model" data-rev="[[model.rev]]" data-id="[[model.id]]">
        <td class="model-id">[[model.id]]</td>
        <td class="model-file-name">[[model.file_name]]</td>
        <td class="model-last-modified">[[model.last_modified]]</td>
        <td>
          <form action="/files/[[model.id|u]]" method="POST" class="form-inline">
            <div class="btn-group">
                <a class="btn btn-primary" href="/files/[[model.id|u]]/[[model.rev|u]]/profile">Profile</a>
                [% if admin? %]
                <a class="btn btn-default confirmable" href="/files/[[model.id|u]]/download">Download</a>
                <a class="btn btn-default" href="/files/[[model.id|u]]/edit">Replace</a>
                <input type="hidden" name="_method" value="DELETE"/>
                <button type="submit" class="btn btn-danger confirmable">Delete</button>
                [% endif %]
            </div>
          </form>
        </td>
    </tr>
    [% endfor %]
</table>

<script src="/js/models/index.js" type="text/javascript"></script>
[% endblock %]
